{"is_source_file": true, "format": "Python", "description": "This is a Python source file defining a FastAPI application that provides notification services, specifically email notification via REST API endpoints. It includes configuration loading, API route definitions, and email sending logic with mock provider implementation.", "external_files": ["<standard library: os>", "<third-party: fastapi, pydantic>"], "external_methods": ["os.getenv", "fastapi.FastAPI", "fastapi.HTTPException", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field", "pydantic.EmailStr"], "published": ["health", "send_email"], "classes": [{"name": "SendEmailRequest", "description": "Pydantic model class representing the request payload for sending an email, including recipient email, subject, body, and optional template id."}, {"name": "SendEmailResponse", "description": "Pydantic model class representing the response after attempting to send an email, including status and optional provider message id."}], "methods": [{"name": "Dict[str,Any] get_settings()", "description": "Loads notification service configuration from environment variables.", "scope": "", "scopeKind": ""}, {"name": "health()", "description": "API endpoint that returns liveness and basic service info.", "scope": "", "scopeKind": ""}, {"name": "SendEmailResponse _mock_send(_: SendEmailRequest)", "description": "Mocks email sending, always returning success with a fake provider id.", "scope": "", "scopeKind": ""}, {"name": "SendEmailResponse _provider_send(req: SendEmailRequest)", "description": "Abstracts email sending via configured provider, currently defaults to mock.", "scope": "", "scopeKind": ""}, {"name": "send_email(payload: SendEmailRequest)", "description": "API endpoint that handles incoming email send requests and returns a send result.", "scope": "", "scopeKind": ""}], "calls": ["os.getenv", "fastapi.FastAPI", "fastapi.HTTPException", "app.add_middleware", "app.get", "app.post", "_provider_send"], "search-terms": ["NotificationService", "FastAPI", "email API", "send_email endpoint", "config environment variables", "mock email provider", "health check route"], "state": 2, "file_id": 2, "knowledge_revision": 5, "git_revision": "", "ctags": [{"_type": "tag", "name": "SendEmailRequest", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^class SendEmailRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SendEmailResponse", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^class SendEmailResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_mock_send", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^def _mock_send(_: SendEmailRequest) -> SendEmailResponse:$/", "language": "Python", "typeref": "typename:SendEmailResponse", "kind": "function", "signature": "(_: SendEmailRequest)"}, {"_type": "tag", "name": "_provider_send", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^def _provider_send(req: SendEmailRequest) -> SendEmailResponse:$/", "language": "Python", "typeref": "typename:SendEmailResponse", "kind": "function", "signature": "(req: SendEmailRequest)"}, {"_type": "tag", "name": "allow_origins", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^allow_origins = [o.strip() for o in settings[\"ALLOWED_ORIGINS\"].split(\",\")] if settings[\"ALLOWED/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^    body: str = Field(..., description=\"Email plaintext body\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SendEmailRequest", "scopeKind": "class"}, {"_type": "tag", "name": "get_settings", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^def get_settings() -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^async def health():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "provider_id", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^    provider_id: Optional[str] = Field(None, description=\"Provider message id\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "SendEmailResponse", "scopeKind": "class"}, {"_type": "tag", "name": "send_email", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^async def send_email(payload: SendEmailRequest):$/", "language": "Python", "kind": "function", "signature": "(payload: SendEmailRequest)"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^settings = get_settings()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^    status: str = Field(..., description=\"Result status\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SendEmailResponse", "scopeKind": "class"}, {"_type": "tag", "name": "subject", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^    subject: str = Field(..., description=\"Email subject\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SendEmailRequest", "scopeKind": "class"}, {"_type": "tag", "name": "template_id", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^    template_id: Optional[str] = Field(None, description=\"Provider-specific optional template id/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "SendEmailRequest", "scopeKind": "class"}, {"_type": "tag", "name": "to_email", "path": "/home/kavia/workspace/code-generation/e-commerce-store-11176-11414/NotificationService/app/main.py", "pattern": "/^    to_email: EmailStr = Field(..., description=\"Recipient email\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "SendEmailRequest", "scopeKind": "class"}], "hash": "59f5cf720da459dc20ffd5c251e66046", "format-version": 4, "code-base-name": "NotificationService", "filename": "NotificationService/app/main.py", "fields": [{"name": "allow_origins = [o.strip() for o in settings[\"ALLOWED_ORIGINS\"].split(\",\")] if settings[\"ALLOWED/", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str body", "scope": "SendEmailRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] provider_id", "scope": "SendEmailResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "settings = get_settings()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str status", "scope": "SendEmailResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str subject", "scope": "SendEmailRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] template_id", "scope": "SendEmailRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "EmailStr to_email", "scope": "SendEmailRequest", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"5": ""}]}